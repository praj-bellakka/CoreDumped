{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\leowy\\\\OneDrive\\\\Desktop\\\\React\\\\web1\\\\src\\\\App.js\";\nimport React, { useState } from 'react';\nimport './App.css';\nimport Form from './components/Form';\nimport EnterUID from './components/uid';\nimport { InfoWindow, withScriptjs, withGoogleMap, GoogleMap, Marker } from \"react-google-maps\";\nimport Geocode from \"react-geocode\";\nimport { Descriptions } from 'antd';\nimport AutoComplete from \"react-google-autocomplete\"; //global variables\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst apiKey = \"AIzaSyBsPi3wA_-SZVURg6_iBq8zz5mxW5UcHNo\";\nvar index = 0;\nvar mapList = [];\nGeocode.setApiKey(apiKey);\n\nclass LocationPacket {\n  constructor(address, lat, lng, id) {\n    this.address = address;\n    this.condensedAddress = address;\n    this.coordinates = [lat, lng];\n    this.placeId = id;\n  }\n\n}\n\nconst addLocation = () => {\n  const location = {\n    address: this.state.address,\n    condensedName: this.state.address,\n    coordinates: this.state.coordinates,\n    placeId: this.state.placeId\n  };\n  mapList[index] = location;\n  index++;\n};\n\nconst clearLocations = () => {\n  index = 0;\n  mapList = [];\n};\n\nconst uploadLocations = () => {\n  //let pre = 'User/';\n  //let uid = 'xfukae1s4xSSWiHClQDEAMOPrGW2';\n  //let path = pre.concat(uid); \n  //console.log(path);\n  //const path = \"Users/xfukae1s4xSSWiHClQDEAMOPrGW2\" //to update UID\n  const path = \"sendData/xfukae1s4xSSWiHClQDEAMOPrGW2\"; //to update UID\n\n  const locationRef = firebase.database().ref(path);\n  const locationList = {\n    mapList\n  };\n  locationRef.push(locationList);\n};\n\nclass App extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      address: \"\",\n      condensedAddress: \"\",\n      coordinates: [],\n      placeId: \"\",\n      zoom: 12,\n      height: 400,\n      mapPosition: {\n        lat: 0,\n        lng: 0\n      },\n      markerPosition: {\n        lat: 0,\n        lng: 0\n      }\n    };\n\n    this.onMarkerDragEnd = event => {\n      let newLat = event.latLng.lat();\n      let newLng = event.latLng.lng();\n      Geocode.fromLatLng(newLat, newLng).then(response => {\n        console.log('response', response);\n        const address = response.results[0].formatted_address;\n        const id = response.results[0].place_id;\n        const lat = response.results[0].geometry.location.lat;\n        const lng = response.results[0].geometry.location.lng;\n        const coordinates = [lat, lng];\n        this.createLocationPacket(address, lat, lng, id);\n        this.setState({\n          address: address ? address : \"\",\n          condensedAddress: address ? address : \"\",\n          coordinates: coordinates ? coordinates : \"\",\n          placeId: id ? id : \"\",\n          mapPosition: {\n            lat: lat,\n            lng: lng\n          },\n          markerPosition: {\n            lat: lat,\n            lng: lng\n          }\n        });\n      });\n    };\n\n    this.onPlaceSelected = place => {\n      console.log('place', place);\n      const address = place.formatted_address;\n      const id = place.place_id;\n      const lat = place.geometry.location.lat();\n      const lng = place.geometry.location.lng();\n      const coordinates = [lat, lng];\n      this.createLocationPacket(address, lat, lng, id);\n      this.setState({\n        address: address ? address : \"\",\n        condensedAddress: address ? address : \"\",\n        coordinates: coordinates ? coordinates : \"\",\n        placeId: id ? id : \"\",\n        mapPosition: {\n          lat: lat,\n          lng: lng\n        },\n        markerPosition: {\n          lat: lat,\n          lng: lng\n        }\n      });\n    };\n\n    this.addLocation = () => {\n      const location = {\n        address: this.state.address,\n        condensedName: this.state.address,\n        coordinates: this.state.coordinates,\n        placeId: this.state.placeId\n      };\n      mapList[index] = location;\n      index++;\n    };\n  }\n\n  createLocationPacket(address, lat, lng, id) {\n    let currentLocation = new LocationPacket(address, lat, lng, id);\n  }\n\n  componentDidMount() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        console.log('position', navigator.geolocation);\n        this.setState({\n          mapPosition: {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          },\n          markerPosition: {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          }\n        }, () => {\n          Geocode.fromLatLng(position.coords.latitude, position.coords.longitude).then(response => {\n            console.log('response', response);\n            const address = response.results[0].formatted_address;\n            const id = response.results[0].place_id;\n            const lat = response.results[0].geometry.location.lat;\n            const lng = response.results[0].geometry.location.lng;\n            const coordinates = [lat, lng];\n            this.createLocationPacket(address, lat, lng, id);\n            this.setState({\n              address: address ? address : '',\n              condensedAddress: address ? address : \"\",\n              coordinates: coordinates ? coordinates : \"\",\n              placeId: id ? id : \"\"\n            });\n          }, error => {\n            console.error(error);\n          });\n        });\n      });\n    } else {\n      console.error(\"Geolocation is not supported by this browser!\");\n    }\n  }\n\n  render() {\n    const MapWithAMarker = withScriptjs(withGoogleMap(props => /*#__PURE__*/_jsxDEV(GoogleMap, {\n      defaultZoom: 11,\n      defaultCenter: {\n        lat: this.state.mapPosition.lat,\n        lng: this.state.mapPosition.lng\n      },\n      children: [/*#__PURE__*/_jsxDEV(Marker, {\n        draggable: true,\n        onDragEnd: this.onMarkerDragEnd,\n        position: {\n          lat: this.state.markerPosition.lat,\n          lng: this.state.mapPosition.lng\n        },\n        children: /*#__PURE__*/_jsxDEV(InfoWindow, {\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            children: this.state.address\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 209,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(AutoComplete, {\n        apiKey: apiKey,\n        style: {\n          width: \"100%\",\n          height: '40px',\n          paddindLeft: 16,\n          marginTop: 2,\n          marginBottom: '2rem'\n        },\n        onPlaceSelected: this.onPlaceSelected,\n        options: {\n          types: \"address\",\n          componentRestrictions: \"sg\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 213,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 7\n    }, this)));\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(MapWithAMarker, {\n        googleMapURL: \"https://maps.googleapis.com/maps/api/js?key=AIzaSyBsPi3wA_-SZVURg6_iBq8zz5mxW5UcHNo&v=3.exp&libraries=geometry,drawing,places\",\n        loadingElement: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: `100%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 25\n        }, this),\n        containerElement: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: `400px`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 29\n        }, this),\n        mapElement: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            height: `100%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 23\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 225,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Location Information\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Descriptions, {\n        bordered: true,\n        column: 10,\n        size: \"small\",\n        children: [/*#__PURE__*/_jsxDEV(Descriptions.Item, {\n          label: \"Address\",\n          children: this.state.address\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n          label: \"Latitude\",\n          children: this.state.coordinates[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n          label: \"Longtitude\",\n          children: this.state.coordinates[1]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 241,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Descriptions.Item, {\n          label: \"Place ID\",\n          children: this.state.placeId\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 238,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 245,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 246,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: addLocation,\n        children: \"Add Location\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 248,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/leowy/OneDrive/Desktop/React/web1/src/App.js"],"names":["React","useState","Form","EnterUID","InfoWindow","withScriptjs","withGoogleMap","GoogleMap","Marker","Geocode","Descriptions","AutoComplete","apiKey","index","mapList","setApiKey","LocationPacket","constructor","address","lat","lng","id","condensedAddress","coordinates","placeId","addLocation","location","state","condensedName","clearLocations","uploadLocations","path","locationRef","firebase","database","ref","locationList","push","App","Component","zoom","height","mapPosition","markerPosition","onMarkerDragEnd","event","newLat","latLng","newLng","fromLatLng","then","response","console","log","results","formatted_address","place_id","geometry","createLocationPacket","setState","onPlaceSelected","place","currentLocation","componentDidMount","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","error","render","MapWithAMarker","props","width","paddindLeft","marginTop","marginBottom","types","componentRestrictions"],"mappings":"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","sourcesContent":["import React, {useState} from 'react';\nimport './App.css';\nimport Form from './components/Form'\nimport EnterUID from './components/uid';\nimport {\n  InfoWindow,\n  withScriptjs,\n  withGoogleMap,\n  GoogleMap,\n  Marker,\n} from \"react-google-maps\";\nimport Geocode from \"react-geocode\";\nimport { Descriptions } from 'antd';\nimport AutoComplete from \"react-google-autocomplete\";\n\n//global variables\nconst apiKey = \"AIzaSyBsPi3wA_-SZVURg6_iBq8zz5mxW5UcHNo\";\nvar index = 0;\nvar mapList = [];\n\nGeocode.setApiKey(apiKey);  \n\nclass LocationPacket {\n  constructor (address, lat, lng, id) {\n    this.address = address;\n    this.condensedAddress = address;\n    this.coordinates = [lat, lng];\n    this.placeId = id;\n  }\n}\n\nconst addLocation = () => {\n  const location = {\n    address: this.state.address,\n    condensedName: this.state.address,\n    coordinates: this.state.coordinates,\n    placeId: this.state.placeId,\n  }\n  mapList[index] = location;\n  index++;\n}\n\nconst clearLocations = () => {\n  index = 0;\n  mapList = [];\n}\n\nconst uploadLocations = () => {\n\t\t//let pre = 'User/';\n\t\t//let uid = 'xfukae1s4xSSWiHClQDEAMOPrGW2';\n\t\t//let path = pre.concat(uid); \n\t\t//console.log(path);\n\t\t//const path = \"Users/xfukae1s4xSSWiHClQDEAMOPrGW2\" //to update UID\n\t\tconst path = \"sendData/xfukae1s4xSSWiHClQDEAMOPrGW2\" //to update UID\n\t\tconst locationRef = firebase.database().ref(path);\n\t\tconst locationList = {\n\t\t\tmapList\n\t\t};\n\t\tlocationRef.push(locationList);\n\t}\n\nclass App extends React.Component {\n  state = {\n    address: \"\",\n    condensedAddress: \"\",\n    coordinates: [],\n    placeId: \"\",\n    zoom: 12,\n    height: 400,\n    mapPosition: {\n      lat: 0,\n      lng: 0,\n    },\n    markerPosition: {\n      lat: 0,\n      lng: 0,\n    }\n  }\n\n  createLocationPacket(address, lat, lng, id) {\n    let currentLocation = new LocationPacket(address, lat, lng, id);\n  }\n\n  componentDidMount() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        console.log('position', navigator.geolocation);\n        this.setState({\n          mapPosition: {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          },\n          markerPosition: {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude,\n          }\n        },\n          () => {\n            Geocode.fromLatLng(position.coords.latitude, position.coords.longitude).then(\n              response => {\n                console.log('response', response);\n                const address = response.results[0].formatted_address;\n                const id = response.results[0].place_id;\n                const lat = response.results[0].geometry.location.lat;\n                const lng = response.results[0].geometry.location.lng;\n                const coordinates = [lat, lng];\n\n                this.createLocationPacket(address, lat, lng, id);\n\n                this.setState({\n                  address: (address) ? address : '',\n                  condensedAddress: (address) ? address : \"\",\n                  coordinates: (coordinates) ? coordinates : \"\",\n                  placeId: (id) ? id : \"\"\n                })\n              },\n              error => {\n                console.error(error);\n              }\n            );\n\n          })\n      });\n    } else {\n      console.error(\"Geolocation is not supported by this browser!\");\n    }\n  };\n\n  onMarkerDragEnd = (event) => {\n    let newLat = event.latLng.lat();\n    let newLng = event.latLng.lng();\n\n    Geocode.fromLatLng(newLat, newLng).then(response => {\n      console.log('response', response);\n      const address = response.results[0].formatted_address;\n      const id = response.results[0].place_id;\n      const lat = response.results[0].geometry.location.lat;\n      const lng = response.results[0].geometry.location.lng;\n      const coordinates = [lat, lng];\n\n      this.createLocationPacket(address, lat, lng, id);\n\n      this.setState({\n        address: (address) ? address : \"\",\n        condensedAddress: (address) ? address : \"\",\n        coordinates: (coordinates) ? coordinates : \"\",\n        placeId: (id) ? id : \"\",\n        mapPosition: {\n          lat: lat,\n          lng: lng\n        },\n        markerPosition: {\n          lat: lat,\n          lng: lng\n        }\n      })\n    });\n  }\n\n  onPlaceSelected = (place) => {\n    console.log('place', place);\n    const address = place.formatted_address;\n    const id = place.place_id;\n    const lat = place.geometry.location.lat();\n    const lng = place.geometry.location.lng();\n    const coordinates = [lat, lng];\n\n    this.createLocationPacket(address, lat, lng, id);\n\n    this.setState({\n      address: (address) ? address : \"\",\n      condensedAddress: (address) ? address : \"\",\n      coordinates: (coordinates) ? coordinates : \"\",\n      placeId: (id) ? id : \"\",\n      mapPosition: {\n        lat: lat,\n        lng: lng\n      },\n      markerPosition: {\n        lat: lat,\n        lng: lng\n      }\n    })\n\n  };\n\n\taddLocation = () => {\n\t\tconst location = {\n\t\t\taddress: this.state.address,\n\t\t\tcondensedName: this.state.address,\n\t\t\tcoordinates: this.state.coordinates,\n\t\t\tplaceId: this.state.placeId,\n\t\t}\n\t\tmapList[index] = location;\n\t\tindex++;\n\t}\n\n  render() {\n    const MapWithAMarker = withScriptjs(withGoogleMap(props =>\n      <GoogleMap\n        defaultZoom={11}\n        defaultCenter={{ lat: this.state.mapPosition.lat, lng: this.state.mapPosition.lng }}\n      >\n        <Marker\n          draggable={true}\n          onDragEnd={this.onMarkerDragEnd}\n          position={{ lat: this.state.markerPosition.lat, lng: this.state.mapPosition.lng }}\n        >\n          <InfoWindow>\n            <div>{this.state.address}</div>\n          </InfoWindow>\n        </Marker>\n        <AutoComplete\n          apiKey={apiKey}\n          style={{ width: \"100%\", height: '40px', paddindLeft: 16, marginTop: 2, marginBottom: '2rem' }}\n          onPlaceSelected={this.onPlaceSelected}\n          options={{ types: \"address\", componentRestrictions: \"sg\" }}\n        />\n      </GoogleMap>\n\n    ));\n\n    return (\n      <div>\n      <MapWithAMarker\n        googleMapURL=\"https://maps.googleapis.com/maps/api/js?key=AIzaSyBsPi3wA_-SZVURg6_iBq8zz5mxW5UcHNo&v=3.exp&libraries=geometry,drawing,places\"\n        loadingElement={<div style={{ height: `100%` }} />}\n          containerElement={<div style={{ height: `400px` }} />}\n          mapElement={<div style={{ height: `100%` }} />}\n        />\n\n        <br />\n        <br />\n        <br />\n\n\n        <h3>Location Information</h3>\n        <Descriptions  bordered={true} column={10} size={\"small\"}>\n          <Descriptions.Item label=\"Address\">{this.state.address}</Descriptions.Item>\n          <Descriptions.Item label=\"Latitude\">{this.state.coordinates[0]}</Descriptions.Item>\n          <Descriptions.Item label=\"Longtitude\">{this.state.coordinates[1]}</Descriptions.Item>\n          <Descriptions.Item label=\"Place ID\">{this.state.placeId}</Descriptions.Item>\n        </Descriptions>\n   \n        <br />\n        <br />\n\n        <button onClick={addLocation}>Add Location</button>\n\n      </div>\n\n    );\n  }\n}\nexport default App;\n\n\n"]},"metadata":{},"sourceType":"module"}